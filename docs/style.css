html,body{margin:0;padding:0;font-family:system-ui,-apple-system,"Hiragino Sans","Noto Sans JP",sans-serif;background:#111;color:#f3f3f3}
.app{max-width:420px;margin:0 auto;min-height:100svh;display:flex;flex-direction:column}
header{padding:16px 16px 0;text-align:center;font-weight:700;letter-spacing:.04em}
main{flex:1;display:flex;flex-direction:column;padding:16px;gap:12px}
.btn{appearance:none;border:none;padding:12px 16px;border-radius:10px;font-size:16px;font-weight:700;background:#2a2a2a;color:#fff;width:100%}
.btn[disabled]{opacity:.4}
.btn-ghost{background:transparent;border:1px solid #2c2c2c}

/* タイトル画面のロゴ↓↓↓ここから */
/* ロゴ画像のスタイル */
.logo-img {
  max-width: 200px;
  height: auto;
  margin: 0 auto 0 auto;
  display: block;
}
.title-card {
  background: transparent;  /* 背景カードを消して画像を活かす */
  border: none;
  box-shadow: none;
}
.logo-glow {
  position: absolute;
  top: 40px; left: 50%;
  width: 300px; height: 300px;
  transform: translateX(-50%);
  background: radial-gradient(circle, rgba(240,145,153,0.5) 0%, transparent 70%);
  filter: blur(60px);
  z-index: 0;
}
.logo-ribbon {
  width: 80%;
  height: 4px;
  margin: 10px auto 0 auto;
  background: linear-gradient(90deg, transparent, #F09199, transparent);
  border-radius: 4px;
}

/* タイトル画面のロゴ↑↑↑ここまで */

/* タイトル画面のアイコンボタン（Settings / About / Musics / NFT）↓↓↓ここから */
.title-btn-ghost{
  width: 90px;
  height: 90px;
  border-radius: 14px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  font-size: 13px;
  font-weight: 600;

  /* 背景を半透明にして背景画像と分離 */
  background: rgba(255, 255, 255, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.3);
  backdrop-filter: blur(6px);   /* ガラス風（対応ブラウザのみ） */

  color: #fff;                  /* 白文字で視認性UP */
  box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  transition: all 0.2s ease;
}

.title-btn-ghost:hover {
  background: rgba(255, 192, 203, 0.25); /* ホバー時は淡いピンク強調 */
  border-color: #F09199;                 /* プロジェクトカラーにリンク */
  box-shadow: 0 6px 14px rgba(0,0,0,0.35);
}

.title-btn-ghost span {
  font-size: 12px;
  margin-top: 4px;
}
/* タイトル画面のアイコンボタン（Settings / About / Musics / NFT）↑↑↑ここまで */

.row{display:flex;gap:10px}
.hidden{display:none !important}
.card{background:#1a1a1a;border:1px solid #2c2c2c;border-radius:12px;padding:14px}
.subtitle{opacity:.7;font-size:12px}
.version{margin-top:1rem;opacity:.7;font-size:12px;color:#F09199}
.scene{position:relative;flex:1;min-height:60svh;border-radius:14px;overflow:hidden;background:#000;border:1px solid #2c2c2c}
.bg{position:absolute;inset:0;background:#333 center/cover no-repeat;transition:opacity .1s}
.char{position:absolute;inset:auto 0 120px 0;width:100%;display:flex;justify-content:center}
.char img{max-width:80%;filter:drop-shadow(0 8px 16px rgba(0,0,0,.6))}

.textbox {
  position: absolute;
  left: 50%;
  bottom: 0px;
  transform: translateX(-50%);
  z-index: 3;

  width: 92%;
  max-width: 330px;

  /* 背景：黒～濃いグレーのグラデーション */
  background: linear-gradient(180deg, #2a2a2a 0%, #1a1a1a 100%);
  border: 2px solid #F09199; 
  color: #fff;

  /* ピンクの枠をアクセントに */
  border: 2px solid #F09199;
  border-radius: 16px;

  /* 余白と文字調整 */
  padding: 18px 22px 76px 22px;  /* ←ここを「下だけ厚め」にする：上 右 下 左 */
  font-size: 16px;
  line-height: 1.6;

  /* 影でカード感を演出 */
  box-shadow: 0 6px 20px rgba(0,0,0,0.4),
              0 0 12px rgba(240,145,153,0.6); /* ピンクの外側光 */

}
/* 話者名と本文。本文は既定で4行ぶんの高さを確保（文字サイズに連動） */
.name{ font-weight:700; margin:0 0 6px; }
.name .kana{ font-weight:600; opacity:.9; margin-left:6px; font-size:.9em; }

.text{
  line-height: 1.6;
  min-height: 4lh;     /* ←標準4行表示。フォントサイズに追従して伸縮 */
  margin: 0 0 8px 0;   /* ボタンとの間に薄い余白 */
}

/* 左上のホームボタン（ストーリー画面のみ） */
.home-btn{
  position:absolute;
  top:8px; left:8px;
  z-index:4;
  width:36px; height:36px;
  border-radius:10px;
  border:1px solid #2c2c2c;
  background:#161616;
  color:#fff;
  font-weight:700;
  box-shadow: 0 2px 10px rgba(0,0,0,.3);
}
.home-btn:hover{ filter: brightness(1.08); }

/* テキストボックス左下の小さな戻るボタン↓↓↓ここから */
.btn-mini{
  position:absolute;
  left:10px; bottom:10px;
  padding:6px 10px;
  font-size:12px;
  border-radius:8px;
  background:#2a2a2a;
  color:#fff;
  border:1px solid #444;
  opacity:.95;
}
.btn-mini:hover{ filter:brightness(1.08); }
.btn-mini[disabled]{ opacity:.45; pointer-events:none; }
/* テキストボックス左下の小さな戻るボタン↑↑↑ここまで */

.name{font-weight:700;margin-bottom:6px}
.name .kana{font-weight:600;opacity:.9;margin-left:6px;font-size:.9em}
.text{line-height:1.6;min-height:3lh}
.choice{display:flex;flex-direction:column;gap:8px;margin-top:10px}
.hud{
    position:absolute;
    right:8px;
    top:8px;
    font-size:12px;
    background:rgba(0,0,0,.45);
    padding:6px 8px;
    border-radius:8px
}
.pulse{animation:pulse .35s ease}
@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.15)}100%{transform:scale(1)}}
textarea{width:100%;height:120px;border-radius:10px;border:1px solid #2c2c2c;background:#121212;color:#eee;padding:10px;font-family:ui-monospace,"SFMono-Regular",Menlo,Consolas,monospace;font-size:12px}
.mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;font-size:12px;opacity:.75}
.form{display:flex;flex-direction:column;gap:8px}
.form label{font-size:12px;opacity:.9}
.form input{padding:10px;border-radius:10px;border:1px solid #2c2c2c;background:#121212;color:#eee}

/* == Font size presets (text & name only) == */
.text { font-size: 16px; }   /* base */
.name { font-size: 16px; }

.fs-s .text { font-size: 14px; }
.fs-s .name { font-size: 14px; }

.fs-m .text { font-size: 16px; }
.fs-m .name { font-size: 16px; }

.fs-l .text { font-size: 18px; }
.fs-l .name { font-size: 18px; }

.fs-xl .text { font-size: 20px; }
.fs-xl .name { font-size: 20px; }

/* == Theme overrides == */
.theme-light body{ background:#f7f7f7; color:#222 }
.theme-light .card{ background:#ffffff; border-color:#e5e5e5 }
.theme-light .btn{ background:#e9e9e9; color:#111 }
.theme-light .btn-ghost{ background:transparent; border-color:#d0d0d0; color:#111 }
.theme-light .scene{ background:#fafafa; border-color:#e5e5e5 }
.theme-light .bg{ background:#ddd center/cover no-repeat }
.theme-light .textbox{ background:linear-gradient(180deg, rgba(255,255,255,0), rgba(255,255,255,.86)) }
.theme-light .hud{ background:rgba(255,255,255,.6); color:#111 }
.theme-light textarea{ background:#fff; color:#222; border-color:#d0d0d0 }
.theme-light .subtitle{ color:#444; opacity:.9 }

/* modal - About&Legalメニュー */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:999}
.modal-card{width:min(92vw,520px);background:#1a1a1a;border:1px solid #2c2c2c;border-radius:12px;padding:16px}
.theme-light .modal-card{background:#fff;border-color:#e5e5e5;color:#111}
.modal.hidden{display:none}

/* list */
.list{display:flex;flex-direction:column;gap:8px;margin-top:8px}
.list-item{display:flex;flex-direction:column;gap:2px;padding:10px;border-radius:10px;border:1px solid #2c2c2c;background:#161616}
.theme-light .list-item{background:#fafafa;border-color:#e5e5e5}
.list-item .meta{font-size:12px;opacity:.8}

/* 次へボタン↓↓↓ここから：右下横長＋ピンク枠＆グロー */
#btn-next {
  position: absolute;
  right: 2px;
  bottom: 2px;
  width: 60%;
  padding: 12px 0;
  border-radius: 12px;
  font-size: 15px;
  font-weight: 700;
  background: #1a1a1a;        /* 濃いグレー背景 */
  color: #fff;
  border: 2px solid #F09199;  /* ピンク枠 */
  /* 常時ほんのり光る */
  box-shadow: 
    0 4px 10px rgba(0,0,0,0.35),
    0 0 10px rgba(240,145,153,0.6),
    0 0 18px rgba(240,145,153,0.4);
  transition: all 0.2s ease;
}
/* PC用 hover（強い光） */
#btn-next:hover {
  background: #2a2a2a;
  filter: brightness(1.08);
  box-shadow: 
    0 6px 14px rgba(0,0,0,0.4),
    0 0 16px rgba(240,145,153,0.9),
    0 0 28px rgba(240,145,153,0.7);
}
/* スマホ用 active（タップした瞬間の押し込み感） */
#btn-next:active {
  transform: scale(0.97); /* 少し縮む */
  box-shadow: 
    0 3px 8px rgba(0,0,0,0.4),
    0 0 14px rgba(240,145,153,0.9),
    0 0 24px rgba(240,145,153,0.6);
}
/* 次へボタン↑↑↑ここまで */

/* 選択肢を縦に並べる */
.choice {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 8px;
}
/* 選択肢表示時のテキストボックス調整 */
.textbox.choice-mode {
  padding-top: 12px;
  padding-bottom: 12px;  /* ← 通常より狭めに */
  max-height: 50svh;       /* ← 画面の40%くらいに制限（好みで36〜45の間で調整） ※svhはモバイルでも安定しやすい“実測ビューポート高”単位。ボックスの肥大化を防ぎます。*/
  overflow-y: auto;      /* ← 溢れたらスクロール */
}

.choice .btn { white-space: normal; } /* 選択肢ボタンが長文になっても折り返して収まる */

/* タイトル画面に3枚の画像をランダム表示↓↓↓ここから */
/* タイトル背景レイヤー */
#page-title { 
  position: relative; 
  overflow: hidden; 
  min-height: 100vh;  /* ← 画面全体の高さ分に制限 */
}
.title-bg {
  position: absolute; inset: 0;
  height: clamp(800px, 60vh, 640px);  /* ← ここで背景の縦を固定範囲に */
  background: #000 center/cover no-repeat;
  z-index: 0; opacity: 1; transition: opacity .35s ease;
}

/* タイトル前景（ボタンやロゴ）を常に前面に */
#page-title > *:not(.title-bg) { position: relative; z-index: 1; }
/* 半透明の暗幕で文字を読みやすくしたい時は擬似要素で */
.title-bg::after{
  content:""; position:absolute; inset:0;
  background: linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.55));
}
/* タイトル画面に3枚の画像をランダム表示↑↑↑ここまで */

